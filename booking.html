<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
    <title>pujaa</title>
    <link rel="stylesheet" href="3.css">
    <link rel="stylesheet" href="booking.css">
</head>

<body>

<!-- HEADER -->
<header class="text-gray-600 body-font">
  <div class="container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center">
    <a class="flex title-font font-medium items-center text-gray-900 mb-4 md:mb-0">
      <img src="baba.jpg" class="logo">
      <span class="ml-3 text-xl">Puja Vidhi</span>
    </a>

    <nav class="md:mr-auto md:ml-4 flex flex-wrap text-base justify-center">
      <a href="#" class="mr-5 hover:text-gray-900">patrika / Dhos</a>
      <a href="#" class="mr-5 hover:text-gray-900">ganesh pujan</a>
      <a href="#" class="mr-5 hover:text-gray-900">shanti karm</a>
    </nav>

    <div id="google_translate_element"></div>
  </div>
</header>

<!-- STEP BOOKING FORM -->
<div class="max-w-xl mx-auto mt-10 p-6 bg-white shadow-xl rounded-2xl">

  <div id="stepIndicator" class="flex justify-between mb-6 text-sm font-semibold">
    <div class="step text-blue-600">1. Service</div>
    <div class="step text-gray-400">2. Date</div>
    <div class="step text-gray-400">3. Details</div>
    <div class="step text-gray-400">4. Payment</div>
    <div class="step text-gray-400">5. Confirm</div>
  </div>

  <!-- STEP 1 -->
  <div id="step1">
    <h2 class="text-xl font-bold mb-4">Select Service</h2>
    <select id="service" class="w-full p-3 border rounded-lg mb-4">
      <option value="">Choose a service</option>
      <option value="Satyanarayan Puja">Satyanarayan Puja</option>
      <option value="Vastu Shanti">Vastu Shanti</option>
      <option value="Kundli Reading">Kundli Reading</option>
      <option value="Grah Dosh Puja">Grah Dosh Puja</option>
    </select>
    <button id="next1" class="w-full bg-blue-600 text-white py-3 rounded-lg" disabled>Next</button>
  </div>

  <!-- STEP 2 -->
  <div id="step2" class="hidden">
    <h2 class="text-xl font-bold mb-4">Select Date & Time</h2>

    <label class="text-sm">Select Date</label>
    <input type="date" id="date" class="w-full p-3 border rounded-lg mb-4">

    <label class="text-sm">Select Time</label>
    <div class="flex gap-2 mb-4">
      <input type="time" id="time" class="flex-grow p-3 border rounded-lg">
      <select id="ampm" class="w-24 p-3 border rounded-lg">
        <option value="">AM/PM</option>
        <option>AM</option>
        <option>PM</option>
      </select>
    </div>

    <div class="flex justify-between">
      <button id="back2" class="bg-gray-300 px-4 py-2 rounded-lg">Back</button>
      <button id="next2" class="bg-blue-600 text-white px-4 py-2 rounded-lg" disabled>Next</button>
    </div>
  </div>

  <!-- STEP 3 -->
  <div id="step3" class="hidden">
    <h2 class="text-xl font-bold mb-4">Enter Your Details</h2>

    <input type="text" id="name" placeholder="Your Name" class="w-full p-3 border rounded-lg mb-4">
    <input type="tel" id="phone" placeholder="Mobile Number (10 digits)" class="w-full p-3 border rounded-lg mb-4">
    <input type="text" id="address" placeholder="Your Address" class="w-full p-3 border rounded-lg mb-4">

    <div class="flex justify-between">
      <button id="back3" class="bg-gray-300 px-4 py-2 rounded-lg">Back</button>
      <button id="next3" class="bg-blue-600 text-white px-4 py-2 rounded-lg" disabled>Next</button>
    </div>
  </div>

  <!-- STEP 4 - PAYMENT -->
  <div id="step4" class="hidden">
    <h2 class="text-xl font-bold mb-4 text-green-700">Pay ‚Çπ500 Advance to Confirm Booking</h2>

    <p class="text-gray-700 mb-2">Scan this QR to pay via any UPI app:</p>
    <img src="QRcode.jpg" alt="UPI QR Code" class="w-48 mx-auto mb-4 border rounded-lg shadow-md">

    <p class="text-sm text-gray-600 mb-2">UPI ID: <strong>vedantwadekar49@okaxis</strong></p>

    <input type="text" id="txnId" placeholder="Enter UPI Transaction ID" class="w-full p-3 border rounded-lg mb-4">
    <p class="text-xs text-gray-500 mb-3">Enter the transaction ID after paying ‚Çπ500 to proceed.</p>

    <div class="flex justify-between">
      <button id="back4" class="bg-gray-300 px-4 py-2 rounded-lg">Back</button>
      <button id="next4" class="bg-blue-600 text-white px-4 py-2 rounded-lg" disabled>Next</button>
    </div>
  </div>

  <!-- STEP 5 -->
  <div id="step5" class="hidden">
    <h2 class="text-xl font-bold mb-4">Confirm Your Booking</h2>

    <div class="p-4 bg-gray-100 rounded-lg mb-4">
      <p><strong>Service:</strong> <span id="cService"></span></p>
      <p><strong>Date:</strong> <span id="cDate"></span></p>
      <p><strong>Time:</strong> <span id="cTime"></span></p>
      <p><strong>Name:</strong> <span id="cName"></span></p>
      <p><strong>Phone:</strong> <span id="cPhone"></span></p>
      <p><strong>Address:</strong> <span id="cAddress"></span></p>
    </div>

    <button id="confirm" class="w-full bg-green-600 text-white py-3 rounded-lg">
      Confirm & Book
    </button>

    <button id="back4" class="w-full bg-gray-300 py-3 rounded-lg mt-3">Back</button>
  </div>

</div>

<script>
  // Step elements
  const step1 = document.getElementById("step1");
  const step2 = document.getElementById("step2");
  const step3 = document.getElementById("step3");
  const step4 = document.getElementById("step4");
  const step5 = document.getElementById("step5");

  // Buttons
  const next1 = document.getElementById("next1");
  const next2 = document.getElementById("next2");
  const next3 = document.getElementById("next3");
  const next4 = document.getElementById("next4");
  const confirmBtn = document.getElementById("confirm");

  // Inputs
  const service = document.getElementById("service");
  const date = document.getElementById("date");
  const time = document.getElementById("time");
  const ampm = document.getElementById("ampm");
  const name = document.getElementById("name");
  const phone = document.getElementById("phone");
  const address = document.getElementById("address");
  const txnId = document.getElementById("txnId");

  // Enable / disable Next buttons for validation
  service.addEventListener("change", () => next1.disabled = service.value === "");
  date.addEventListener("change", checkStep2);
  time.addEventListener("change", checkStep2);
  ampm.addEventListener("change", checkStep2);
  name.addEventListener("input", checkStep3);
  phone.addEventListener("input", checkStep3);
  address.addEventListener("input", checkStep3);
  txnId.addEventListener("input", validateTxn);

  // ‚úÖ Time validation: only allow between 5 AM and 5 PM
  function checkStep2() {
    if (date.value && time.value && ampm.value) {
      const [hours, minutes] = time.value.split(":").map(Number);
      const totalHours = ampm.value === "PM" ? hours + 12 : hours;

      if (totalHours >= 5 && totalHours <= 17) {
        next2.disabled = false;
      } else {
        next2.disabled = true;
        alert("Bookings are allowed only between 5 AM and 5 PM.");
      }
    } else {
      next2.disabled = true;
    }
  }

  function checkStep3() {
    next3.disabled = !(name.value && phone.value.length === 10 && address.value);
  }

  // ‚úÖ Accepts all valid UPI types (numeric or alphanumeric)
  function validateTxn() {
    const tx = txnId.value.trim();
    next4.disabled = tx.length < 6;
  }

  // Step navigation
  next1.onclick = () => {
    step1.classList.add("hidden");
    step2.classList.remove("hidden");
  };

  next2.onclick = () => {
    step2.classList.add("hidden");
    step3.classList.remove("hidden");
  };

  next3.onclick = () => {
    step3.classList.add("hidden");
    step4.classList.remove("hidden");
  };

  next4.onclick = () => {
    const tx = txnId.value.trim();
    if (tx.length < 6) return alert("Please enter a valid Transaction ID (min 6 characters).");

    document.getElementById("cService").innerText = service.value;
    document.getElementById("cDate").innerText = date.value;
    document.getElementById("cTime").innerText = time.value + " " + ampm.value;
    document.getElementById("cName").innerText = name.value;
    document.getElementById("cPhone").innerText = phone.value;
    document.getElementById("cAddress").innerText = address.value;

    step4.classList.add("hidden");
    step5.classList.remove("hidden");
  };

  // ‚úÖ Confirm Booking (send to Google Sheets)
  confirmBtn.onclick = async () => {
    const webAppUrl = "https://script.google.com/macros/s/AKfycbxjEnNuSVcNbmC3apLtVcqXPMk04kXLRDpoF1NomcsSUWWGpr5npRb-jeuTWL-hvZ52/exec"; // üî• Replace with your deployed Apps Script Web App URL

    const payload = new URLSearchParams({
      service: service.value,
      date: date.value,
      time: time.value + " " + ampm.value,
      name: name.value,
      phone: phone.value,
      address: address.value,
      txnId: txnId.value
    });

    try {
      const res = await fetch(webAppUrl, {
        method: "POST",
        body: payload
      });

      const text = await res.text();

      if (text.includes("Success") || text.includes("Booking Successful")) {
        alert("‚úÖ Booking Confirmed! Your data has been saved.");
        step5.innerHTML = `<h2 class='text-green-600 text-xl font-bold'>‚úÖ Booking Confirmed!</h2>
        <p>We have received your booking and ‚Çπ500 advance payment.</p>`;
      } else {
        alert("‚ö†Ô∏è Something went wrong: " + text);
      }
    } catch (err) {
      alert("‚ùå Error: " + err.message);
    }
  };
</script>

<hr>


<footer class="text-gray-600 body-font">
  <div class="container px-5 py-24 mx-auto flex md:items-center lg:items-start md:flex-row md:flex-nowrap flex-wrap flex-col">
    <div class="w-64 flex-shrink-0 md:mx-0 mx-auto text-center md:text-left">
      <a class="flex title-font font-medium items-center md:justify-start justify-center text-gray-900">
       <img src="baba.jpg" alt="Logo" class="logo">
          <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
        </svg>
        <span class="ml-3 text-xl">puja Vidhi</span>
      </a>
      <p class="mt-2 text-sm text-black-500">Let‚Äôs understand happiness and duty ‚Äî because true happiness comes when we fulfill our duties with sincerity, purpose, and a positive heart. When we follow our responsibilities with dedication, life becomes more peaceful, balanced, and meaningful.</p>
    </div>
     <div class="flex-grow flex flex-wrap md:pl-20 -mb-10 md:mt-0 mt-10 md:text-left text-center">
     <div class="w-full px-4 mb-8">
      <h1 id="discover-heading" class="font-semibold text-lg mb-3 text-center">"Discover How We Can Help You"</h1>
     </div>
      <div class="lg:w-1/4 md:w-1/2 w-full px-4">
        <h2 class="title-font font-medium text-gray-900 tracking-widest text-sm mb-3">patrika</h2>
        <nav >
          <ul class="list-none mb-10">
          <li>
            <a class="text-gray-600 hover:text-gray-800">janm kundli</a>
          </li>
          <li>
            <a class="text-gray-600 hover:text-gray-800">rashi kundli</a>
          </li>
          <li>
            <a class="text-gray-600 hover:text-gray-800">grahanchi dasha</a>
          </li>
          <li>
            <a class="text-gray-600 hover:text-gray-800">bhavisha</a>
          </li>
        </ul>
        </nav>
      </div>
      <div class="lg:w-1/4 md:w-1/2 w-full px-4">
        <h2 class="title-font font-medium text-gray-900 tracking-widest text-sm mb-3">CATEGORIES</h2>
        <nav> 
          <ul class="list-none mb-10">
          <li>
            <a class="text-gray-600 hover:text-gray-800">First Link</a>
          </li>
          <li>
            <a class="text-gray-600 hover:text-gray-800">Second Link</a>
          </li>
          <li>
            <a class="text-gray-600 hover:text-gray-800">Third Link</a>
          </li>
          <li>
            <a class="text-gray-600 hover:text-gray-800">Fourth Link</a>
          </li>
        </ul>
        </nav>
      </div>
      <div class="lg:w-1/4 md:w-1/2 w-full px-4">
        <h2 class="title-font font-medium text-gray-900 tracking-widest text-sm mb-3">CATEGORIES</h2>
        <nav> 
          <ul class="list-none mb-10">
          <li>
            <a class="text-gray-600 hover:text-gray-800">First Link</a>
          </li>
          <li>
            <a class="text-gray-600 hover:text-gray-800">Second Link</a>
          </li>
          <li>
            <a class="text-gray-600 hover:text-gray-800">Third Link</a>
          </li>
          <li>
            <a class="text-gray-600 hover:text-gray-800">Fourth Link</a>
          </li>
        </ul>
        </nav>
      </div>
      <div class="lg:w-1/4 md:w-1/2 w-full px-4">
        <h2 class="title-font font-medium text-gray-900 tracking-widest text-sm mb-3">CATEGORIES</h2>
        <nav>
          <ul class="list-none mb-10">
          <li>
            <a class="text-gray-600 hover:text-gray-800">First Link</a>
          </li>
          <li>
            <a class="text-gray-600 hover:text-gray-800">Second Link</a>
          </li>
          <li>
            <a class="text-gray-600 hover:text-gray-800">Third Link</a>
          </li>
          <li>
            <a class="text-gray-600 hover:text-gray-800">Fourth Link</a>
          </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</footer>
</body>
</html>